{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '23838686-34a57fb5ee7e13f7202c685b1';\n\nasync function searchImages(str, page) {\n  const params = {\n    q: str,\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  };\n  const { data } = await axios(URL, {\n    params,\n  });\n  return data;\n}\n\nexport { searchImages };\n","function showSearchResults(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n          <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"152\" />\n              <ul class=\"description\">\n                <li class=\"description-items\">\n                  <span class=\"accent\">Likes </span>${likes}\n                </li>\n                <li class=\"description-items\">\n                  <span class=\"accent\">Views </span>${views}\n                </li>\n                <li class=\"description-items\">\n                  <span class=\"accent\">Comments </span>${comments}\n                </li>\n                <li class=\"description-items\">\n                  <span class=\"accent\">Downloads </span>${downloads}\n                </li>\n              </ul>\n            </a>\n          </li>`\n    )\n    .join('');\n}\n\nexport { showSearchResults };\n","import { searchImages } from './js/pixabay-api';\nimport { showSearchResults } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst elements = {\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('.search-input'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.load-more-btn'),\n};\n\nconst photosGallery = new simpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nelements.form.addEventListener('submit', searchHandler);\nelements.btnLoadMore.addEventListener('click', onLoadMore);\n\nlet curentPage = 1;\nlet searchString = '';\n\nasync function searchHandler(event) {\n  event.preventDefault();\n  elements.gallery.innerHTML = '';\n  searchString = elements.input.value.trim();\n  curentPage = 1;\n\n  elements.btnLoadMore.classList.add('visually-hidden');\n\n  if (searchString === '') {\n    return iziToast.error({\n      message: 'Search field can not be empty!',\n      position: 'topCenter',\n      timeout: 3000,\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n\n      progressBarColor: '#b51b1b',\n      maxWidth: '432px',\n    });\n  }\n  elements.loader.classList.remove('visually-hidden');\n  try {\n    const data = await searchImages(searchString, curentPage);\n\n    if (data.hits.length === 0) {\n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 3000,\n        messageColor: '#fafafb',\n        backgroundColor: '#ef4040',\n\n        progressBarColor: '#b51b1b',\n        maxWidth: '432px',\n      });\n    }\n    elements.gallery.innerHTML = showSearchResults(data.hits);\n    photosGallery.refresh();\n    elements.input.value = '';\n    if (data.totalHits > 15) {\n      elements.btnLoadMore.classList.remove('visually-hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `Something went wrong... Error: ${error.message}`,\n      position: 'topCenter',\n      timeout: 3000,\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n\n      progressBarColor: '#b51b1b',\n      maxWidth: '432px',\n    });\n  } finally {\n    elements.loader.classList.add('visually-hidden');\n  }\n}\n\nasync function onLoadMore() {\n  curentPage++;\n  elements.loader.classList.remove('visually-hidden');\n  try {\n    const data = await searchImages(searchString, curentPage);\n    elements.gallery.insertAdjacentHTML(\n      'beforeend',\n      showSearchResults(data.hits)\n    );\n    photosGallery.refresh();\n    const { height } =\n      elements.gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n\n      behavior: 'smooth',\n    });\n    if (Math.ceil(data.totalHits / 15) === curentPage) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topCenter',\n        timeout: 3000,\n        messageColor: '#fafafb',\n        backgroundColor: '#ef4040',\n\n        progressBarColor: '#b51b1b',\n        maxWidth: '432px',\n      });\n      elements.btnLoadMore.classList.add('visually-hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `Something went wrong... Error: ${error.message}`,\n      position: 'topCenter',\n      timeout: 3000,\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n\n      progressBarColor: '#b51b1b',\n      maxWidth: '432px',\n    });\n  } finally {\n    elements.loader.classList.add('visually-hidden');\n  }\n}\n"],"names":["URL","API_KEY","searchImages","str","page","params","data","axios","showSearchResults","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","elements","photosGallery","simpleLightbox","searchHandler","onLoadMore","curentPage","searchString","event","iziToast","error","height"],"mappings":"owBAEA,MAAMA,EAAM,2BACNC,EAAU,qCAEhB,eAAeC,EAAaC,EAAKC,EAAM,CACrC,MAAMC,EAAS,CACb,EAAGF,EACH,IAAKF,EACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAG,EACA,SAAU,EACd,EACQ,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAMP,EAAK,CAChC,OAAAK,CACJ,CAAG,EACD,OAAOC,CACT,CCnBA,SAASE,EAAkBC,EAAO,CAChC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,4CAEgCL,CAAa;AAAA,gDACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,sDAGpBC,CAAK;AAAA;AAAA;AAAA,sDAGLC,CAAK;AAAA;AAAA;AAAA,yDAGFC,CAAQ;AAAA;AAAA;AAAA,0DAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,gBAK9D,EACA,KAAK,EAAE,CACZ,CC1BA,MAAMC,EAAW,CACf,KAAM,SAAS,cAAc,cAAc,EAC3C,MAAO,SAAS,cAAc,eAAe,EAC7C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,gBAAgB,CACtD,EAEMC,EAAgB,IAAIC,EAAe,aAAc,CACrD,aAAc,MACd,aAAc,IACd,eAAgB,EAClB,CAAC,EAEDF,EAAS,KAAK,iBAAiB,SAAUG,CAAa,EACtDH,EAAS,YAAY,iBAAiB,QAASI,CAAU,EAEzD,IAAIC,EAAa,EACbC,EAAe,GAEnB,eAAeH,EAAcI,EAAO,CAQlC,GAPAA,EAAM,eAAc,EACpBP,EAAS,QAAQ,UAAY,GAC7BM,EAAeN,EAAS,MAAM,MAAM,KAAI,EACxCK,EAAa,EAEbL,EAAS,YAAY,UAAU,IAAI,iBAAiB,EAEhDM,IAAiB,GACnB,OAAOE,EAAS,MAAM,CACpB,QAAS,iCACT,SAAU,YACV,QAAS,IACT,aAAc,UACd,gBAAiB,UAEjB,iBAAkB,UAClB,SAAU,OAChB,CAAK,EAEHR,EAAS,OAAO,UAAU,OAAO,iBAAiB,EAClD,GAAI,CACF,MAAMX,EAAO,MAAMJ,EAAaqB,EAAcD,CAAU,EAExD,GAAIhB,EAAK,KAAK,SAAW,EACvB,OAAOmB,EAAS,MAAM,CACpB,QACE,2EACF,SAAU,WACV,QAAS,IACT,aAAc,UACd,gBAAiB,UAEjB,iBAAkB,UAClB,SAAU,OAClB,CAAO,EAEHR,EAAS,QAAQ,UAAYT,EAAkBF,EAAK,IAAI,EACxDY,EAAc,QAAO,EACrBD,EAAS,MAAM,MAAQ,GACnBX,EAAK,UAAY,IACnBW,EAAS,YAAY,UAAU,OAAO,iBAAiB,CAE1D,OAAQS,EAAO,CACdD,EAAS,MAAM,CACb,QAAS,kCAAkCC,EAAM,OAAO,GACxD,SAAU,YACV,QAAS,IACT,aAAc,UACd,gBAAiB,UAEjB,iBAAkB,UAClB,SAAU,OAChB,CAAK,CACL,QAAY,CACRT,EAAS,OAAO,UAAU,IAAI,iBAAiB,CAChD,CACH,CAEA,eAAeI,GAAa,CAC1BC,IACAL,EAAS,OAAO,UAAU,OAAO,iBAAiB,EAClD,GAAI,CACF,MAAMX,EAAO,MAAMJ,EAAaqB,EAAcD,CAAU,EACxDL,EAAS,QAAQ,mBACf,YACAT,EAAkBF,EAAK,IAAI,CACjC,EACIY,EAAc,QAAO,EACrB,KAAM,CAAE,OAAAS,CAAQ,EACdV,EAAS,QAAQ,kBAAkB,wBACrC,OAAO,SAAS,CACd,IAAKU,EAAS,EAEd,SAAU,QAChB,CAAK,EACG,KAAK,KAAKrB,EAAK,UAAY,EAAE,IAAMgB,IACrCG,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,YACV,QAAS,IACT,aAAc,UACd,gBAAiB,UAEjB,iBAAkB,UAClB,SAAU,OAClB,CAAO,EACDR,EAAS,YAAY,UAAU,IAAI,iBAAiB,EAEvD,OAAQS,EAAO,CACdD,EAAS,MAAM,CACb,QAAS,kCAAkCC,EAAM,OAAO,GACxD,SAAU,YACV,QAAS,IACT,aAAc,UACd,gBAAiB,UAEjB,iBAAkB,UAClB,SAAU,OAChB,CAAK,CACL,QAAY,CACRT,EAAS,OAAO,UAAU,IAAI,iBAAiB,CAChD,CACH"}